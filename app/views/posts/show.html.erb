<p>

<p style="white-space: pre-line"><%= @post.message %></p>
<br>
<p> Created by <b><%= @post.user.name %></b> at <%= @post.created_at.in_time_zone("London").strftime('%B %d %Y, %l:%M%P') %> </p>
<br>
<% if @post.user.id == current_user.id %>
  <%= link_to 'Update', edit_user_post_path(@user) %>
  <%= link_to 'Delete', [@post.user, @post],
                          method: :delete,
                          data: { confirm: 'Are you sure?' } %>
<% end %>
</p>
<br>

<% @post.postcomments.select(&:persisted?).each do |pc| %>
  <li><b><%= pc.commenter %></b>
  (<%= time_ago_in_words(pc.created_at) %> ago):
  <%= pc.content %>
  <% if pc.commenter == current_user.name %>
    <%= link_to 'Delete comment', [@user, pc.post, pc],
                            method: :delete,
                            data: { confirm: 'Are you sure?' } %>
  <% end %></li>
  <br>
<% end %>

<%= form_for [@post, @post.postcomments.build], url: { controller: :postcomments, action: :create, post_id: @post.id }, method: :create do |form| %>
  <%= form.text_field :content %>
  <%= form.submit 'Add comment'%>
<% end %>


</p>

<%= link_to 'All posts', user_posts_path %>
